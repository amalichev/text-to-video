#!/usr/bin/env python3
"""
Скрипт для автоматической замены 'е' на 'ё' в русском тексте
"""

import sys
import re

# Словарь слов, где е должно быть заменено на ё
YO_WORDS = {
    'все': 'всё',
    'её': 'её',
    'ещё': 'ещё',
    'моё': 'моё',
    'твоё': 'твоё',
    'своё': 'своё',
    'её': 'её',
    'чём': 'чём',
    'о чём': 'о чём',
    'в чём': 'в чём',
    'на чём': 'на чём',
    'зачём': 'зачём',
    'почём': 'почём',
    'нём': 'нём',
    'о нём': 'о нём',
    'в нём': 'в нём',
    'на нём': 'на нём',
    'тебя': 'тебя',
    'себя': 'себя',
    'вернёт': 'вернёт',
    'даёт': 'даёт',
    'поёт': 'поёт',
    'живёт': 'живёт',
    'берёт': 'берёт',
    'ведёт': 'ведёт',
    'везёт': 'везёт',
    'идёт': 'идёт',
    'несёт': 'несёт',
    'течёт': 'течёт',
    'чернее': 'чернее',
    'темно': 'темно',
    'четко': 'чётко',
    'лёд': 'лёд',
    'мёд': 'мёд',
    'полёт': 'полёт',
    'счёт': 'счёт',
    'учёт': 'учёт',
    'приём': 'приём',
    'подъём': 'подъём',
    'наём': 'наём',
    'ёлка': 'ёлка',
    'ёж': 'ёж',
    'чёрный': 'чёрный',
    'жёлтый': 'жёлтый',
    'зелёный': 'зелёный',
    'даже': 'даже',
    'тоже': 'тоже',
    'уже': 'уже',
    'может': 'может',
    'дает': 'даёт',
    'ведет': 'ведёт',
    'несет': 'несёт',
    'берет': 'берёт',
    'живет': 'живёт',
    'идет': 'идёт',
    'поет': 'поёт',
    'везет': 'везёт',
    'течет': 'течёт',
    'возьмет': 'возьмёт',
    'придет': 'придёт',
    'найдет': 'найдёт',
    'уйдет': 'уйдёт',
    'подойдет': 'подойдёт',
    'перейдет': 'перейдёт',
}

def fix_yo_in_text(text):
    """Заменяет 'е' на 'ё' в известных словах"""

    # Создаём паттерн для поиска слов с границами
    for word_e, word_yo in YO_WORDS.items():
        # Ищем слово с учётом границ слова (не внутри другого слова)
        pattern = r'\b' + re.escape(word_e) + r'\b'
        text = re.sub(pattern, word_yo, text, flags=re.IGNORECASE)

    return text

def main():
    if len(sys.argv) < 2:
        print("Использование: python3 fix_yo.py input.txt [output.txt]")
        print("Если output.txt не указан, изменения будут сохранены в исходный файл")
        sys.exit(1)

    input_file = sys.argv[1]
    output_file = sys.argv[2] if len(sys.argv) > 2 else input_file

    # Читаем файл
    with open(input_file, 'r', encoding='utf-8') as f:
        text = f.read()

    # Исправляем ё
    fixed_text = fix_yo_in_text(text)

    # Сохраняем
    with open(output_file, 'w', encoding='utf-8') as f:
        f.write(fixed_text)

    print(f"✓ Файл обработан: {output_file}")

if __name__ == "__main__":
    main()
